# Руководство для контрибьюторов

Спасибо за интерес к проекту CryptoCore! Мы приветствуем вклад от сообщества.

## Как внести вклад

### Отчеты об ошибках

Если вы нашли ошибку:

1. Проверьте, не была ли она уже зарегистрирована в [Issues](https://github.com/dankapust/CryptoCore/issues)
2. Если нет, создайте новый issue с:
   - Четким описанием проблемы
   - Шагами для воспроизведения
   - Ожидаемым и фактическим поведением
   - Версией Python и операционной системы
   - Полным traceback (если применимо)

### Предложения по улучшению

Для предложений новых функций:

1. Создайте [issue](https://github.com/dankapust/CryptoCore/issues) с меткой "enhancement"
2. Опишите:
   - Какую проблему решает предложение
   - Предлагаемое решение
   - Альтернативные варианты (если есть)

### Pull Requests

1. **Форкните репозиторий** и создайте ветку для вашей функции:
   ```bash
   git checkout -b feature/amazing-feature
   ```

2. **Следуйте стилю кода:**
   - PEP 8 для Python
   - Отступ 4 пробела
   - `snake_case` для функций и переменных
   - `CamelCase` для классов
   - Docstrings для всех публичных функций

3. **Добавьте тесты:**
   - Новые функции должны быть покрыты тестами
   - Все тесты должны проходить (`pytest`)
   - Покрытие кода должно оставаться > 90%

4. **Обновите документацию:**
   - Обновите `docs/API.md` для новых функций
   - Обновите `docs/USERGUIDE.md` для новых CLI команд
   - Обновите `CHANGELOG.md` с описанием изменений

5. **Убедитесь, что все проверки проходят:**
   ```bash
   # Установите зависимости
   python3 -m venv .venv
   source .venv/bin/activate
   pip install -r requirements.txt
   pip install pytest

   # Запустите тесты
   pytest

   # Проверьте линтер (если настроен)
   # flake8 pycryptocore/
   ```

6. **Создайте Pull Request:**
   - Опишите, что изменилось
   - Ссылайтесь на связанные issues
   - Убедитесь, что CI проходит

## Стандарты разработки

### Структура проекта

```
pycryptocore/
  ├── cli.py              # CLI интерфейс
  ├── crypto_core.py      # AES режимы (ECB/CBC/CFB/OFB/CTR)
  ├── csprng.py           # CSPRNG
  ├── file_io.py          # Файловый I/O
  ├── hash/               # Хеш-функции
  ├── kdf/                # Key Derivation Functions
  ├── mac/                # MAC функции
  └── modes/              # GCM и другие режимы
```

### Стиль кода

**Именование:**
- Функции: `snake_case` (например, `aes_encrypt`)
- Классы: `CamelCase` (например, `GCM`)
- Константы: `UPPER_SNAKE_CASE` (например, `KEY_SIZE`)
- Модули: `snake_case` (например, `crypto_core.py`)

**Docstrings:**
```python
def encrypt_data(key: bytes, plaintext: bytes) -> bytes:
    """
    Шифрует данные с использованием AES-128.

    Args:
        key: 16-байтовый ключ шифрования
        plaintext: Данные для шифрования

    Returns:
        Зашифрованные данные

    Raises:
        ValueError: Если длина ключа неверна
        CryptoCoreError: При ошибке шифрования
    """
    pass
```

### Тестирование

**Требования к тестам:**
- Каждая публичная функция должна иметь тест
- Используйте известные тестовые векторы (NIST, RFC)
- Добавьте негативные тесты (неверные входные данные)
- Тесты должны быть независимыми и воспроизводимыми

**Пример теста:**
```python
def test_aes_encrypt_ecb():
    """Тест шифрования AES-ECB с известным вектором."""
    key = bytes.fromhex("000102030405060708090a0b0c0d0e0f")
    plaintext = b"Hello, World!"
    ciphertext, _ = aes_encrypt("ecb", key, plaintext)
    
    # Проверка round-trip
    decrypted, _ = aes_decrypt("ecb", key, ciphertext)
    assert decrypted == plaintext
```

### Криптографические требования

**Безопасность:**
- Никогда не используйте `random` модуль для криптографии
- Всегда используйте `os.urandom()` или `generate_random_bytes()`
- Не логируйте ключи, пароли или другие секреты
- Очищайте чувствительные данные из памяти после использования
- Используйте constant-time операции где необходимо

**Реализация:**
- Следуйте стандартам (NIST, RFC)
- Используйте известные тестовые векторы для проверки
- Документируйте любые отклонения от стандартов

## Процесс разработки

### Рабочий процесс

1. **Создайте issue** для обсуждения больших изменений
2. **Создайте ветку** от `main`:
   ```bash
   git checkout -b feature/your-feature
   ```
3. **Делайте коммиты** с понятными сообщениями:
   ```bash
   git commit -m "Add support for new encryption mode"
   ```
4. **Тестируйте** ваши изменения:
   ```bash
   pytest
   python3 run_tests.py
   ```
5. **Обновите документацию** при необходимости
6. **Создайте Pull Request**

### Сообщения коммитов

Используйте понятные сообщения коммитов:

```
Add: Новый режим шифрования XTS
Fix: Исправлена ошибка в обработке IV
Update: Обновлена документация API
Refactor: Улучшена структура модуля hash
```

## Области для вклада

Мы особенно приветствуем вклад в:

- **Новые режимы шифрования** (XTS, CCM, ChaCha20-Poly1305)
- **Дополнительные хеш-функции** (BLAKE2, SHA-512)
- **Улучшение производительности** (оптимизация критических путей)
- **Расширение тестов** (больше тестовых векторов, edge cases)
- **Документация** (примеры, туториалы, переводы)
- **Интеграции** (другие инструменты, библиотеки)

## Вопросы?

Если у вас есть вопросы:

1. Проверьте документацию в `docs/`
2. Посмотрите существующие [issues](https://github.com/dankapust/CryptoCore/issues)
3. Создайте новый issue с вопросом

## Лицензия

Внося вклад, вы соглашаетесь с тем, что ваш вклад будет лицензирован под той же лицензией, что и проект.

---

**Спасибо за ваш вклад!**

